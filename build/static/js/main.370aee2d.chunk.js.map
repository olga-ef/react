{"version":3,"sources":["services/logService.js","services/httpService.js","services/movieService.js","services/genreService.js","components/common/like.jsx","components/common/tableHeader.jsx","components/common/tableBody.jsx","components/common/table.jsx","services/authService.js","components/moviesTable.jsx","components/common/pagination.jsx","components/common/listGroup.jsx","components/searchBox.jsx","components/movies.jsx","utils/paginate.js","components/common/navbar.jsx","components/customers.jsx","components/rentals.jsx","components/common/notFound.jsx","components/common/input.jsx","components/common/select.jsx","components/common/form.jsx","components/movieForm.jsx","components/loginForm.jsx","services/userService.js","components/registerForm.jsx","components/logout.jsx","components/common/protectedRoute.jsx","App.js","serviceWorker.js","index.js"],"names":["logService","init","log","error","console","axios","defaults","baseURL","process","interceptors","response","use","status","logger","toast","Promise","reject","httpService","get","post","put","delete","setJwt","jwt","headers","common","apiEndpoint","movieUrl","id","concat","getMovie","movieId","http","saveMovie","movie","_id","body","Object","objectSpread","getGenres","Like","_this$props","this","props","onLike","react_default","a","createElement","className","onClick","getIcon","classes","liked","Component","TableHeader","raiseSort","path","sortColumn","_this","order","onSort","renderSortIcon","column","_this2","columns","map","key","label","TableBody","renderCell","item","content","_","createKey","data","Table","_ref","tableHeader","tableBody","tokenKey","login","_x","_x2","_login","apply","arguments","_callee","email","password","regenerator_default","wrap","_context","prev","next","sent","localStorage","setItem","stop","loginWithJwt","logout","removeItem","getCurrentUser","getItem","jwtDecode","ex","getJwt","authService","MoviesTable","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","Link","to","title","like","deleteColumn","onDelete","user","auth","isAdmin","push","movies","table","Pagination","itemsCount","pageSize","onPageChange","currentPage","pagesCount","Math","ceil","pages","range","page","href","ListGroup","items","onItemSelect","textProperty","valueProperty","selectedItem","defaultProps","SearchBox","value","onChange","type","name","placeholder","e","currentTarget","Movies","state","genres","searchQuery","selectedGenre","getPageData","_this$state","allMovies","filtered","filter","m","toLowerCase","startsWith","genre","pageNumber","startIndex","slice","take","paginate","orderBy","totalCount","length","handleDelete","originalMovies","setState","t0","handleLike","toConsumableArray","index","indexOf","handlePageChange","handleGenereSelect","handleSort","handleChange","query","_this$state2","_this$getPageData","listGroup","style","marginBottom","searchBox","moviesTable","pagination","NavBar","data-toggle","data-target","aria-controls","aria-expanded","aria-label","NavLink","Fragment","Customers","Rentals","NotFound","Input","rest","objectWithoutProperties","htmlFor","assign","Select","options","option","Form","errors","validate","Joi","schema","abortEarly","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","details","Symbol","iterator","done","message","err","return","validateProperty","obj","defineProperty","handleSubmit","preventDefault","doSubmit","_ref2","input","errorMessage","disabled","common_input","common_select","MovieForm","genreId","numberInStock","dailyRentalRate","string","required","number","min","max","history","populateGenres","populateMovie","match","params","mapToViewModel","_context4","replace","onSubmit","renderInput","renderSelect","renderButton","LoginForm","username","React","createRef","location","window","from","pathname","erorrs","Redirect","RegisterForm","Logout","ProtectedRoute","component","render","Route","App","lib","navbar","Switch","protectedRoute","components_movies","exact","Boolean","hostname","ReactDOM","BrowserRouter","src_App_0","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"8YAae,IAAAA,EAAA,CACdC,KAZD,aAaCC,IAPD,SAAcC,GACbC,QAAQF,IAAIC,KCLbE,IAAMC,SAASC,QAAUC,sDAEzBH,IAAMI,aAAaC,SAASC,IAAI,KAAM,SAAAR,GASpC,OAPsBA,EAAMO,UAAYP,EAAMO,SAASE,QAAU,KAAOT,EAAMO,SAASE,OAAS,MAG9FC,EAAOX,IAAIC,GACXW,QAAMX,MAAM,gCAGPY,QAAQC,OAAOb,KAOT,IAAAc,EAAA,CACdC,IAAKb,IAAMa,IACXC,KAAMd,IAAMc,KACZC,IAAKf,IAAMe,IACXC,OAAQhB,IAAMgB,OACbC,OATF,SAAiBC,GACflB,IAAMC,SAASkB,QAAQC,OAAO,gBAAmBF,IChB7CG,SAAc,WAEpB,SAASC,EAAUC,GAClB,SAAAC,OAAUH,EAAV,KAAAG,OAAyBD,GAWnB,SAASE,EAASC,GACxB,OAAOC,EAAKd,IAAIS,EAASI,IAGnB,SAASE,EAAUC,GACzB,GAAIA,EAAMC,IAAK,CACd,IAAMC,EAAIC,OAAAC,EAAA,EAAAD,CAAA,GAAOH,GAEjB,cADOE,EAAKD,IACLH,EAAKZ,IAAIO,EAASO,EAAMC,KAAMC,GAGtC,OAAOJ,EAAKb,KAAKO,EAAaQ,GCzBxB,SAASK,IACf,OAAOP,EAAKd,IAAI,uBCYFsB,mLAZJ,IAAAC,EACiBC,KAAKC,MAAvBC,EADCH,EACDG,OAAQV,EADPO,EACOP,MAChB,OAAOW,EAAAC,EAAAC,cAAA,QAAMC,UAAU,YAAYC,QAAS,kBAAML,EAAOV,KAAQW,EAAAC,EAAAC,cAAA,KAAGC,UAAWN,KAAKQ,+CAKpF,IAAIC,EAAU,cAEd,OADAA,GAAWT,KAAKC,MAAMS,MAAQ,GAAK,YAVlBC,aC6CJC,6MAvCdC,UAAY,SAAAC,GACX,IAAMC,EAAUpB,OAAAC,EAAA,EAAAD,CAAA,GAAOqB,EAAKf,MAAMc,YAC9BA,EAAWD,OAASA,EACvBC,EAAWE,MAA8B,QAArBF,EAAWE,MAAmB,OAAS,OAE3DF,EAAWD,KAAOA,EAClBC,EAAWE,MAAQ,OAEpBD,EAAKf,MAAMiB,OAAOH,MAGnBI,eAAiB,SAAAC,GAAU,IAClBL,EAAeC,EAAKf,MAApBc,WACR,OAAIK,EAAON,OAASC,EAAWD,KAAa,KACnB,QAArBC,EAAWE,MAAwBd,EAAAC,EAAAC,cAAA,KAAGC,UAAU,mBAE7CH,EAAAC,EAAAC,cAAA,KAAGC,UAAU,6FAGX,IAAAe,EAAArB,KACT,OACCG,EAAAC,EAAAC,cAAA,aACCF,EAAAC,EAAAC,cAAA,UACGL,KAAKC,MAAMqB,QAAQC,IAAI,SAAAH,GAAM,OAC9BjB,EAAAC,EAAAC,cAAA,MACCC,UAAU,YACVkB,IAAKJ,EAAON,MAAQM,EAAOI,IAC3BjB,QAAS,kBAAMc,EAAKR,UAAUO,EAAON,QAEpCM,EAAOK,MALT,IAKiBJ,EAAKF,eAAeC,eA9BjBT,aCuBXe,6MA1BdC,WAAa,SAACC,EAAMR,GACnB,OAAIA,EAAOS,QAAgBT,EAAOS,QAAQD,GAEnCE,IAAEtD,IAAIoD,EAAMR,EAAON,SAG3BiB,UAAY,SAACH,EAAMR,GAClB,OAAOQ,EAAKnC,KAAO2B,EAAON,MAAQM,EAAOI,8EAGhC,IAAAH,EAAArB,KAAAD,EACiBC,KAAKC,MAAvB+B,EADCjC,EACDiC,KAAMV,EADLvB,EACKuB,QACd,OACCnB,EAAAC,EAAAC,cAAA,aAEC2B,EAAKT,IAAI,SAAAK,GAAI,OACZzB,EAAAC,EAAAC,cAAA,MAAImB,IAAKI,EAAKnC,KACZ6B,EAAQC,IAAI,SAAAH,GAAM,OAAIjB,EAAAC,EAAAC,cAAA,MAAImB,IAAKH,EAAKU,UAAUH,EAAMR,IAAUC,EAAKM,WAAWC,EAAMR,iBAlBnET,aCeTsB,EAbD,SAAAC,GAA2C,IAAxCZ,EAAwCY,EAAxCZ,QAASP,EAA+BmB,EAA/BnB,WAAYG,EAAmBgB,EAAnBhB,OAAQc,EAAWE,EAAXF,KAC7C,OACC7B,EAAAC,EAAAC,cAAA,SAAOC,UAAU,SAChBH,EAAAC,EAAAC,cAAC8B,EAAD,CACCb,QAASA,EACTP,WAAYA,EACZG,OAAQA,IAETf,EAAAC,EAAAC,cAAC+B,EAAD,CAAWJ,KAAMA,EAAMV,QAASA,uBCR7BtC,EAAc,QACdqD,EAAW,QAIV,SAAeC,EAAtBC,EAAAC,GAAA,OAAAC,EAAAC,MAAA1C,KAAA2C,sDAAO,SAAAC,EAAsBC,EAAOC,GAA7B,IAAAZ,EAAArD,EAAA,OAAAkE,EAAA3C,EAAA4C,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACsB7D,EAAKb,KAAKO,EAAa,CAAC6D,QAAOC,aADrD,OAAAZ,EAAAe,EAAAG,KACQvE,EADRqD,EACEF,KACRqB,aAAaC,QAAQjB,EAAUxD,GAFzB,wBAAAoE,EAAAM,SAAAX,EAAA5C,gCAKA,SAASwD,EAAc3E,GAC7BwE,aAAaC,QAAQjB,EAAUxD,GAGzB,SAAS4E,IACfJ,aAAaK,WAAWrB,GAGlB,SAASsB,IACf,IACK,IAAM9E,EAAMwE,aAAaO,QAAQvB,GACjC,OAAOwB,IAAUhF,GAErB,MAAOiF,GACN,OAAO,MAIH,SAASC,IACf,OAAOV,aAAaO,QAAQvB,GA1B7B/C,EAAKV,OAAOmF,KA6BG,IAAAC,EAAA,CACd1B,QACAkB,eACAC,SACAE,iBACAI,UCOcE,cApBd,SAAAA,IAAe,IAAAjD,EAAArB,OAAAuE,EAAA,EAAAvE,CAAAK,KAAAiE,IACdjD,EAAArB,OAAAwE,EAAA,EAAAxE,CAAAK,KAAAL,OAAAyE,EAAA,EAAAzE,CAAAsE,GAAAI,KAAArE,QArBDsB,QAAU,CACT,CAACR,KAAO,QAASW,MAAO,QAASI,QAAS,SAAArC,GAAK,OAAIW,EAAAC,EAAAC,cAACiE,EAAA,EAAD,CAAMC,GAAE,UAAApF,OAAYK,EAAMC,MAAQD,EAAMgF,SAC3F,CAAC1D,KAAM,aAAcW,MAAO,SAC5B,CAACX,KAAM,gBAAiBW,MAAO,SAC/B,CAACX,KAAM,kBAAmBW,MAAO,QACjC,CAACD,IAAK,OAAQK,QAAS,SAAArC,GAAK,OAAIW,EAAAC,EAAAC,cAACoE,EAAD,CAAMjF,MAAOA,EAAOU,OAAQc,EAAKf,MAAMC,OAAQQ,MAAOlB,EAAMkB,WAe9EM,EAZf0D,aAAe,CACdlD,IAAK,SACLK,QAAS,SAAArC,GAAK,OACbW,EAAAC,EAAAC,cAAA,UACCE,QAAS,kBAAMS,EAAKf,MAAM0E,SAASnF,IACnCc,UAAU,kBAFX,YAWD,IAAMsE,EAAOC,EAAKlB,iBAFJ,OAGViB,GAAQA,EAAKE,SAChB9D,EAAKM,QAAQyD,KAAK/D,EAAK0D,cAJV1D,wEAOL,IAAAjB,EAC6BC,KAAKC,MAAnC+E,EADCjF,EACDiF,OAAQjE,EADPhB,EACOgB,WAAYG,EADnBnB,EACmBmB,OAC5B,OACCf,EAAAC,EAAAC,cAAC4E,EAAD,CACCjD,KAAMgD,EACN9D,OAAQA,EACRH,WAAYA,EACZO,QAAStB,KAAKsB,iBAnCQX,aCsBXuE,EA1BI,SAAAhD,GAA0D,IAAvDiD,EAAuDjD,EAAvDiD,WAAYC,EAA2ClD,EAA3CkD,SAAUC,EAAiCnD,EAAjCmD,aAAcC,EAAmBpD,EAAnBoD,YACnDC,EAAaC,KAAKC,KAAKN,EAAaC,GAC1C,GAAmB,IAAfG,EAAkB,OAAO,KAC7B,IAAMG,EAAQ5D,IAAE6D,MAAM,EAAGJ,EAAa,GAEtC,OACCpF,EAAAC,EAAAC,cAAA,WACCF,EAAAC,EAAAC,cAAA,MAAIC,UAAU,cACXoF,EAAMnE,IAAI,SAACqE,GAAD,OACVzF,EAAAC,EAAAC,cAAA,MAAIC,UAAWsF,IAASN,EAAc,mBAAqB,YAAa9D,IAAKoE,GAC5EzF,EAAAC,EAAAC,cAAA,KAAGC,UAAU,YAAYuF,KAAK,IAAItF,QAAS,kBAAM8E,EAAaO,KAAQA,SCZvEE,EAAY,SAAA5D,GAAwE,IAArE6D,EAAqE7D,EAArE6D,MAAOC,EAA8D9D,EAA9D8D,aAAcC,EAAgD/D,EAAhD+D,aAAcC,EAAkChE,EAAlCgE,cAAeC,EAAmBjE,EAAnBiE,aACtE,OACChG,EAAAC,EAAAC,cAAA,MAAIC,UAAU,cACZyF,EAAMxE,IAAI,SAAAK,GAAI,OACdzB,EAAAC,EAAAC,cAAA,MACCE,QAAS,kBAAMyF,EAAapE,IAC5BtB,UAAWsB,IAASuE,EAAe,mCAAqC,4BACxE3E,IAAKI,EAAKsE,IAAiBtE,EAAKqE,QAMrCH,EAAUM,aAAe,CACxBH,aAAe,OACfC,cAAe,OAGDJ,QCLAO,EAbG,SAAAnE,GAAyB,IAAtBoE,EAAsBpE,EAAtBoE,MAAOC,EAAerE,EAAfqE,SAC3B,OACCpG,EAAAC,EAAAC,cAAA,SACCmG,KAAK,OACLC,KAAK,QACLnG,UAAU,oBACVoG,YAAY,YACZJ,MAAOA,EACPC,SAAU,SAAAI,GAAC,OAAIJ,EAASI,EAAEC,cAAcN,WC4H5BO,8MAvHdC,MAAQ,CACP9B,OAAQ,GACR+B,OAAQ,GACR3B,SAAU,EACV4B,YAAa,GACbC,cAAe,KACf3B,YAAa,EACbvE,WAAY,CAAED,KAAM,QAASG,MAAO,UAUrCiG,YAAc,WAAM,IAAAC,EAC0EnG,EAAK8F,MAA1F1B,EADW+B,EACX/B,SAAUE,EADC6B,EACD7B,YAAa2B,EADZE,EACYF,cAAeD,EAD3BG,EAC2BH,YAAajG,EADxCoG,EACwCpG,WAAoBqG,EAD5DD,EACoDnC,OAEnEqC,EAAWD,EACXJ,EACHK,EAAWD,EAAUE,OAAQ,SAAAC,GAAC,OAAIA,EAAE/C,MAAMgD,cAAcC,WAAWT,EAAYQ,iBACrEP,GAAiBA,EAAcxH,MACzC4H,EAAWD,EAAUE,OAAO,SAAAC,GAAC,OAAIA,EAAEG,MAAMjI,MAAQwH,EAAcxH,OAGhE,IACMuF,ECzCD,SAAmBe,EAAO4B,EAAYvC,GAC5C,IAAMwC,GAAcD,EAAa,GAAKvC,EACtC,OAAOtD,IAAEiE,GACP8B,MAAMD,GACNE,KAAK1C,GACLkB,QDoCcyB,CADAjG,IAAEkG,QAAQX,EAAU,CAACtG,EAAWD,MAAO,CAACC,EAAWE,QAClCqE,EAAaF,GAE7C,MAAO,CAAE6C,WAAYZ,EAASa,OAAQlG,KAAMgD,MAG7CmD,mDAAe,SAAAvF,EAAMpD,GAAN,IAAA4I,EAAApD,EAAA,OAAAjC,EAAA3C,EAAA4C,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACRiF,EAAiBpH,EAAK8F,MAAM9B,OAC5BA,EAASoD,EAAed,OAAO,SAAA1F,GAAI,OAAIA,EAAKnC,MAAQD,EAAMC,MAChEuB,EAAKqH,SAAS,CAACrD,WAHD/B,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EXnCY9D,EWyCPG,EAAMC,IXxCnBH,EAAKX,OAAOM,EAASI,IWkCb,OAAA4D,EAAAE,KAAA,gBAAAF,EAAAC,KAAA,EAAAD,EAAAqF,GAAArF,EAAA,SASTA,EAAAqF,GAAGtK,UAAmC,MAAvBiF,EAAAqF,GAAGtK,SAASE,QAC9BE,QAAMX,MAAM,qCAEbuD,EAAKqH,SAAS,CAACrD,OAAQoD,IAZV,yBAAAnF,EAAAM,OXnCT,IAAqBlE,GWmCZuD,EAAA5C,KAAA,oEAgBfuI,WAAa,SAAC/I,GACb,IAAMwF,EAAMrF,OAAA6I,EAAA,EAAA7I,CAAOqB,EAAK8F,MAAM9B,QACxByD,EAAQzD,EAAO0D,QAAQlJ,GAC7BwF,EAAOyD,GAAP9I,OAAAC,EAAA,EAAAD,CAAA,GAAoBH,GACpBwF,EAAOyD,GAAO/H,OAASsE,EAAOyD,GAAO/H,MACrCM,EAAKqH,SAAS,CAAErD,cAGjB2D,iBAAmB,SAAA/C,GAClB5E,EAAKqH,SAAS,CAAE/C,YAAcM,OAG/BgD,mBAAqB,SAAAlB,GACpB1G,EAAKqH,SAAS,CAAEpB,cAAeS,EAAOpC,YAAa,EAAG0B,YAAa,QAGpE6B,WAAa,SAAA9H,GACZC,EAAKqH,SAAS,CAAEtH,kBAGjB+H,aAAe,SAAAC,GACd/H,EAAKqH,SAAS,CAAErB,YAAa+B,EAAO9B,cAAe,KAAM3B,YAAa,8NA3D/CzF,2BAAfmC,SACF+E,GAAU,CAACtH,IAAK,GAAIgH,KAAM,kCAAkBzE,aXjB3C1C,EAAKd,IAAIQ,mBWkBFgG,IAANhD,KACRhC,KAAKqI,SAAS,CAACrD,SAAQ+B,+IA4DG/G,KAAK8G,MAAM9B,OAA7BkD,OADC,IAAAc,EAEqChJ,KAAK8G,MAA3C1B,EAFC4D,EAED5D,SAAUE,EAFT0D,EAES1D,YAAavE,EAFtBiI,EAEsBjI,WACvB6D,EAAS5E,KAAKC,MAAd2E,KAHCqE,EAK4BjJ,KAAKkH,cAAlCe,EALCgB,EAKDhB,WAAkBjD,EALjBiE,EAKWjH,KAEpB,OACA7B,EAAAC,EAAAC,cAAA,OAAKC,UAAU,OACdH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,SACdH,EAAAC,EAAAC,cAAC6I,EAAD,CACCnD,MAAO/F,KAAK8G,MAAMC,OAClBZ,aAAcnG,KAAK8G,MAAMG,cACzBjB,aAAchG,KAAK4I,sBAGrBzI,EAAAC,EAAAC,cAAA,OAAKC,UAAU,OACbsE,GACAzE,EAAAC,EAAAC,cAACiE,EAAA,EAAD,CACCC,GAAG,cACHjE,UAAU,kBACV6I,MAAO,CAAEC,aAAc,KAHxB,aAQDjJ,EAAAC,EAAAC,cAAA,mBAAW4H,EAAX,2BACA9H,EAAAC,EAAAC,cAACgJ,EAAD,CAAW/C,MAAOtG,KAAK8G,MAAME,YAAaT,SAAUvG,KAAK8I,eACzD3I,EAAAC,EAAAC,cAACiJ,EAAD,CACCtE,OAAQA,EACRjE,WAAYA,EACZb,OAAQF,KAAKuI,WACb5D,SAAU3E,KAAKmI,aACfjH,OAAQlB,KAAK6I,aAEd1I,EAAAC,EAAAC,cAACkJ,EAAD,CACCpE,WAAY8C,EACZ7C,SAAUA,EACVE,YAAaA,EACbD,aAAcrF,KAAK2I,4BAjHHhI,sBEqCN6I,GAhDA,SAAAtH,GAAc,IAAX0C,EAAW1C,EAAX0C,KAEjB,OACCzE,EAAAC,EAAAC,cAAA,OAAKC,UAAU,iDACfH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,gBAAf,SACCH,EAAAC,EAAAC,cAAA,UAAQC,UAAU,iBAAiBkG,KAAK,SAASiD,cAAY,WAAWC,cAAY,0BAA0BC,gBAAc,yBAAyBC,gBAAc,QAAQC,aAAW,qBACpL1J,EAAAC,EAAAC,cAAA,QAAMC,UAAU,yBAElBH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,6BACdH,EAAAC,EAAAC,cAAA,MAAIC,UAAU,cACbH,EAAAC,EAAAC,cAAA,MAAIC,UAAU,YACbH,EAAAC,EAAAC,cAACyJ,GAAA,EAAD,CAASvF,GAAG,UAAUjE,UAAU,YAAhC,WAEDH,EAAAC,EAAAC,cAAA,MAAIC,UAAU,YACbH,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACyJ,GAAA,EAAD,CAASvF,GAAG,aAAajE,UAAU,YAAnC,eAGHH,EAAAC,EAAAC,cAAA,MAAIC,UAAU,YACbH,EAAAC,EAAAC,cAACyJ,GAAA,EAAD,CAASvF,GAAG,WAAWjE,UAAU,YAAjC,aAGCsE,GACDzE,EAAAC,EAAAC,cAACF,EAAAC,EAAM2J,SAAP,KACC5J,EAAAC,EAAAC,cAAA,MAAIC,UAAU,YACbH,EAAAC,EAAAC,cAACyJ,GAAA,EAAD,CAASvF,GAAG,SAASjE,UAAU,YAA/B,UAEDH,EAAAC,EAAAC,cAAA,MAAIC,UAAU,YACbH,EAAAC,EAAAC,cAACyJ,GAAA,EAAD,CAASvF,GAAG,YAAYjE,UAAU,YAAlC,cAIFsE,GACAzE,EAAAC,EAAAC,cAACF,EAAAC,EAAM2J,SAAP,KACC5J,EAAAC,EAAAC,cAAA,MAAIC,UAAU,YACbH,EAAAC,EAAAC,cAACyJ,GAAA,EAAD,CAASvF,GAAG,WAAWjE,UAAU,YAAYsE,EAAK6B,OAEnDtG,EAAAC,EAAAC,cAAA,MAAIC,UAAU,YACbH,EAAAC,EAAAC,cAACyJ,GAAA,EAAD,CAASvF,GAAG,UAAUjE,UAAU,YAAhC,gBC/BO0J,GARG,WACjB,OACC7J,EAAAC,EAAAC,cAAA,WACCF,EAAAC,EAAAC,cAAA,yBCKY4J,GARC,WACf,OACC9J,EAAAC,EAAAC,cAAA,WACCF,EAAAC,EAAAC,cAAA,uBCCY6J,GAJE,WACf,OAAO/J,EAAAC,EAAAC,cAAA,6DCSM8J,GAVD,SAAAjI,GAAqC,IAAlCuE,EAAkCvE,EAAlCuE,KAAMhF,EAA4BS,EAA5BT,MAAOhE,EAAqByE,EAArBzE,MAAU2M,EAAWzK,OAAA0K,GAAA,EAAA1K,CAAAuC,EAAA,0BAClD,OACC/B,EAAAC,EAAAC,cAAA,OAAKC,UAAU,cACdH,EAAAC,EAAAC,cAAA,SAAOiK,QAAS7D,GAAOhF,GACvBtB,EAAAC,EAAAC,cAAA,QAAAV,OAAA4K,OAAA,GAAWH,EAAX,CAAiB3D,KAAMA,EAAMnG,UAAU,eAAepB,GAAIuH,KACxDhJ,GAAS0C,EAAAC,EAAAC,cAAA,OAAKC,UAAU,sBAAsB7C,KCQpC+M,GAbA,SAAAtI,GAA8C,IAA3CuE,EAA2CvE,EAA3CuE,KAAMhF,EAAqCS,EAArCT,MAAOhE,EAA8ByE,EAA9BzE,MAAOgN,EAAuBvI,EAAvBuI,QAAYL,EAAWzK,OAAA0K,GAAA,EAAA1K,CAAAuC,EAAA,oCAC5D,OACC/B,EAAAC,EAAAC,cAAA,OAAKC,UAAU,cACdH,EAAAC,EAAAC,cAAA,SAAOiK,QAAS7D,GAAOhF,GACvBtB,EAAAC,EAAAC,cAAA,SAAAV,OAAA4K,OAAA,GAAYH,EAAZ,CAAkB3D,KAAMA,EAAMvH,GAAIuH,EAAMnG,UAAU,iBAClDH,EAAAC,EAAAC,cAAA,UAAQiG,MAAM,KACZmE,EAAQlJ,IAAI,SAAAmJ,GAAM,OAAIvK,EAAAC,EAAAC,cAAA,UAAQiG,MAAOoE,EAAOjL,IAAK+B,IAAKkJ,EAAOjL,KAAMiL,EAAOjE,SAE1EhJ,GAAS0C,EAAAC,EAAAC,cAAA,OAAKC,UAAU,sBAAsB7C,KCuFpCkN,8MAzFd7D,MAAQ,CACP9E,KAAO,GACP4I,OAAQ,MAGTC,SAAW,WACV,IACQpN,EAAUqN,KAAID,SAAS7J,EAAK8F,MAAM9E,KAAMhB,EAAK+J,OADrC,CAACC,YAAY,IACrBvN,MACR,IAAKA,EAAO,OAAO,KAEnB,IAAMmN,EAAS,GALCK,GAAA,EAAAC,GAAA,EAAAC,OAAAC,EAAA,IAMhB,QAAAC,EAAAC,EAAiB7N,EAAM8N,QAAvBC,OAAAC,cAAAR,GAAAI,EAAAC,EAAAnI,QAAAuI,MAAAT,GAAA,EAAgC,KAAvBrJ,EAAuByJ,EAAA/E,MAC/BsE,EAAOhJ,EAAKd,KAAK,IAAMc,EAAK+J,SAPb,MAAAC,GAAAV,GAAA,EAAAC,EAAAS,EAAA,YAAAX,GAAA,MAAAK,EAAAO,QAAAP,EAAAO,SAAA,WAAAX,EAAA,MAAAC,GAUhB,OAAOP,KAGRkB,iBAAmB,SAAA5J,GAAqB,IAAlBuE,EAAkBvE,EAAlBuE,KAAMH,EAAYpE,EAAZoE,MACrByF,EAAGpM,OAAAqM,GAAA,EAAArM,CAAA,GAAM8G,EAAOH,GAChByE,EAAS,GACfA,EAAOtE,GAAQzF,EAAK+J,OAAOtE,GAHY,IAIhChJ,EAASqN,KAAID,SAASkB,EAAKhB,GAA3BtN,MAEP,OAAOA,EAAQA,EAAM8N,QAAQ,GAAGI,QAAU,QAG3CM,aAAe,SAAAtF,GACdA,EAAEuF,iBAGF,IAAMtB,EAAS5J,EAAK6J,WACpB7J,EAAKqH,SAAS,CAAEuC,OAAQA,GAAU,KAE9BA,GACJ5J,EAAKmL,cAGNrD,aAAe,SAAAsD,GAA8B,IAAZC,EAAYD,EAA3BxF,cACXgE,EAAMjL,OAAAC,EAAA,EAAAD,CAAA,GAAOqB,EAAK8F,MAAM8D,QACxB0B,EAAetL,EAAK8K,iBAAiBO,GACvCC,EAAc1B,EAAOyB,EAAM5F,MAAQ6F,SAC3B1B,EAAOyB,EAAM5F,MAEzB,IAAMzE,EAAIrC,OAAAC,EAAA,EAAAD,CAAA,GAAOqB,EAAK8F,MAAM9E,MAC5BA,EAAKqK,EAAM5F,MAAQ4F,EAAM/F,MACzBtF,EAAKqH,SAAS,CAAErG,OAAM4I,wFAGTnJ,GACb,OACCtB,EAAAC,EAAAC,cAAA,UACCkM,SAAUvM,KAAK6K,WACfvK,UAAU,mBACRmB,uCAKQgF,EAAMhF,GAAwC,IAAjC+E,EAAiC7D,UAAAuF,OAAA,QAAAkD,IAAAzI,UAAA,GAAAA,UAAA,GAA1B,OAAQ+D,EAAkB/D,UAAAuF,OAAA,QAAAkD,IAAAzI,UAAA,GAAAA,UAAA,GAAJ,GAAIwE,EACjCnH,KAAK8G,MAAtB9E,EADkDmF,EAClDnF,KAAM4I,EAD4CzD,EAC5CyD,OACd,OACCzK,EAAAC,EAAAC,cAACmM,GAAD,CACChG,KAAMA,EACNC,KAAMA,EACNhF,MAAOA,EACP6E,MAAOtE,EAAKyE,GACZF,SAAUvG,KAAK8I,aACfrL,MAAOmN,EAAOnE,GACdC,YAAaA,yCAKFD,EAAMhF,EAAOgJ,GAAS,IAAAzB,EACVhJ,KAAK8G,MAAtB9E,EAD2BgH,EAC3BhH,KAAM4I,EADqB5B,EACrB4B,OACd,OACCzK,EAAAC,EAAAC,cAACoM,GAAD,CACChG,KAAMA,EACNhF,MAAOA,EACPhE,MAAOmN,EAAOnE,GACdH,MAAOtE,EAAKyE,GACZF,SAAUvG,KAAK8I,aACf2B,QAASA,WApFM9J,aC2EJ+L,8MA1Ed5F,MAAQ,CACP9E,KAAM,CAAEwC,MAAO,GAAImI,QAAS,GAAIC,cAAe,GAAIC,gBAAiB,IACpE9F,OAAQ,GACR6D,OAAQ,MAGTG,OAAS,CACRtL,IAAKqL,KAAIgC,SACTtI,MAAOsG,KAAIgC,SAASC,WAAWtL,MAAM,SACrCkL,QAAS7B,KAAIgC,SAASC,WAAWtL,MAAM,SACvCmL,cAAe9B,KAAIkC,SAASC,IAAI,GAAGC,IAAI,KAAKH,WAAWtL,MAAM,mBAC7DoL,gBAAiB/B,KAAIkC,SAASC,IAAI,GAAGC,IAAI,IAAIH,WAAWtL,MAAM,oBAuC/D0K,8BAAW,SAAAvJ,IAAA,OAAAG,EAAA3C,EAAA4C,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACJ5D,EAAUyB,EAAK8F,MAAM9E,MADjB,OAGVhB,EAAKf,MAAMkN,QAAQpI,KAAK,WAHd,wBAAA9B,EAAAM,SAAAX,EAAA5C,oNAnCJA,KAAKoN,wCACLpN,KAAKqN,2RAKoBxN,oBAAjBkH,IAAN/E,KACRhC,KAAKqI,SAAS,CAAEtB,mRAMC,SADV1H,EAAUW,KAAKC,MAAMqN,MAAMC,OAAOrO,qEAGXE,EAASC,mBAAxBG,IAANwC,KACRhC,KAAKqI,SAAS,CAAErG,KAAMhC,KAAKwN,eAAehO,uDAGtCiO,EAAAnF,GAAGtK,UAAmC,MAAvByP,EAAAnF,GAAGtK,SAASE,QAC9B8B,KAAKC,MAAMkN,QAAQO,QAAQ,iKAKdlO,GACf,MAAO,CACNC,IAAKD,EAAMC,IACX+E,MAAOhF,EAAMgF,MACbmI,QAASnN,EAAMkI,MAAMjI,IACrBmN,cAAepN,EAAMoN,cACrBC,gBAAiBrN,EAAMqN,kDAYxB,OACC1M,EAAAC,EAAAC,cAAA,WACCF,EAAAC,EAAAC,cAAA,yBACAF,EAAAC,EAAAC,cAAA,QAAMsN,SAAU3N,KAAKiM,cACnBjM,KAAK4N,YAAY,QAAS,SAC1B5N,KAAK6N,aAAa,UAAW,QAAS7N,KAAK8G,MAAMC,QACjD/G,KAAK4N,YAAY,gBAAiB,kBAAmB,UACrD5N,KAAK4N,YAAY,kBAAmB,OAAQ,UAE5C5N,KAAK8N,aAAa,iBApEAnD,IC+CToD,8MA9CdjH,MAAQ,CACP9E,KAAM,CAACgM,SAAU,GAAIlL,SAAU,IAC/B8H,OAAQ,MAGTG,OAAS,CACRiD,SAAUlD,KAAIgC,SAASC,WAAWtL,MAAM,YACxCqB,SAAUgI,KAAIgC,SAASC,WAAWtL,MAAM,eAGzCuM,SAAWC,IAAMC,cAEjB/B,8BAAW,SAAAvJ,IAAA,IAAAZ,EAAA8E,EAAA8D,EAAA,OAAA7H,EAAA3C,EAAA4C,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAC,KAAA,EAEDlB,EAAShB,EAAK8F,MAAd9E,KAFCiB,EAAAE,KAAA,EAGHb,EAAMN,EAAKgM,SAAUhM,EAAKc,UAHvB,OAKDgE,EAAU9F,EAAKf,MAAMkO,SAArBrH,MAERsH,OAAOD,SAAWrH,EAAQA,EAAMuH,KAAKC,SAAW,IAPvCrL,EAAAE,KAAA,gBAAAF,EAAAC,KAAA,EAAAD,EAAAqF,GAAArF,EAAA,SAULA,EAAAqF,GAAGtK,UAAmC,MAAvBiF,EAAAqF,GAAGtK,SAASE,UACxB0M,EADwCjL,OAAAC,EAAA,EAAAD,CAAA,GAC3BqB,EAAK8F,MAAMyH,SACvBP,SAAW/K,EAAAqF,GAAGtK,SAASgE,KAC9BhB,EAAKqH,SAAS,CAAEuC,YAbR,yBAAA3H,EAAAM,SAAAX,EAAA5C,KAAA,oFAoBV,OAAI2D,IAAyBxD,EAAAC,EAAAC,cAACmO,EAAA,EAAD,CAAUjK,GAAG,MAEzCpE,EAAAC,EAAAC,cAAA,WACCF,EAAAC,EAAAC,cAAA,mBACAF,EAAAC,EAAAC,cAAA,QAAMsN,SAAU3N,KAAKiM,cACnBjM,KAAK4N,YAAY,WAAY,YAC7B5N,KAAK4N,YAAY,WAAY,WAAY,YACzC5N,KAAK8N,aAAa,kBAxCAnD,ICJlB3L,GAAc,aC+CLyP,8MA1Cd3H,MAAQ,CACP9E,KAAM,CAACgM,SAAU,GAAIlL,SAAU,GAAI2D,KAAM,IACzCmE,OAAQ,MAGTG,OAAS,CACRiD,SAAUlD,KAAIgC,SAASjK,QAAQkK,WAAWtL,MAAM,YAChDqB,SAAUgI,KAAIgC,SAASC,WAAWE,IAAI,GAAGxL,MAAM,YAC/CgF,KAAMqE,KAAIgC,SAASC,WAAWtL,MAAM,WAGrC0K,8BAAW,SAAAvJ,IAAA,IAAAgI,EAAA,OAAA7H,EAAA3C,EAAA4C,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EDdcyB,ECgBqB5D,EAAK8F,MAAM9E,KDflD1C,EAAKb,KAAKO,GAAa,CAC7B6D,MAAO+B,EAAKoJ,SACZlL,SAAU8B,EAAK9B,SACf2D,KAAM7B,EAAK6B,OCUD,OAGTjD,EAHSP,EAAAG,KAGatE,QAAQ,iBAC9BsP,OAAOD,SAAW,IAJTlL,EAAAE,KAAA,gBAAAF,EAAAC,KAAA,EAAAD,EAAAqF,GAAArF,EAAA,SAOLA,EAAAqF,GAAGtK,UAAmC,MAAvBiF,EAAAqF,GAAGtK,SAASE,UACxB0M,EADwCjL,OAAAC,EAAA,EAAAD,CAAA,GAC3BqB,EAAK8F,MAAM8D,SACvBoD,SAAW/K,EAAAqF,GAAGtK,SAASgE,KAC9BhB,EAAKqH,SAAS,CAAEuC,YAVR,yBAAA3H,EAAAM,ODdL,IAAmBqB,GCcdhC,EAAA5C,KAAA,oFAgBV,OACCG,EAAAC,EAAAC,cAAA,WACCF,EAAAC,EAAAC,cAAA,sBACAF,EAAAC,EAAAC,cAAA,QAAMsN,SAAU3N,KAAKiM,cACnBjM,KAAK4N,YAAY,WAAY,WAAY,SACzC5N,KAAK4N,YAAY,WAAY,WAAY,YACzC5N,KAAK4N,YAAY,OAAQ,QACzB5N,KAAK8N,aAAa,qBAnCGnD,ICOZ+D,+LATbjL,IACA2K,OAAOD,SAAW,qCAIlB,OAAO,YAPYxN,aCmBNgO,GAjBQ,SAAAzM,GAAqDA,EAAlDpB,KAAkD,IAAjCH,EAAiCuB,EAA5C0M,UAAsBC,EAAsB3M,EAAtB2M,OAAWzE,EAAWzK,OAAA0K,GAAA,EAAA1K,CAAAuC,EAAA,+BAC3E,OACC/B,EAAAC,EAAAC,cAACyO,EAAA,EAADnP,OAAA4K,OAAA,GACQH,EADR,CAEIyE,OAAQ,SAAA5O,GACP,OAAK4E,EAAKlB,iBAKHhD,EAAYR,EAAAC,EAAAC,cAACM,EAAcV,GAAY4O,EAAO5O,GALjBE,EAAAC,EAAAC,cAACmO,EAAA,EAAD,CAAUjK,GAAI,CACjD+J,SAAU,SACVxH,MAAO,CAAEuH,KAAMpO,EAAMkO,kBC4CdY,2NApCbjI,MAAO,sFAGL,IAAMlC,EAAOjB,IACb3D,KAAKqI,SAAS,CAAEzD,0CAGT,IAAAvD,EAAArB,KACA4E,EAAS5E,KAAK8G,MAAdlC,KACP,OACEzE,EAAAC,EAAAC,cAAA,QAAMC,UAAU,aAChBH,EAAAC,EAAAC,cAAC2O,EAAA,eAAD,MACC7O,EAAAC,EAAAC,cAAC4O,GAAD,CAAQrK,KAAMA,IACdzE,EAAAC,EAAAC,cAAA,OAAKC,UAAU,WACdH,EAAAC,EAAAC,cAAC6O,EAAA,EAAD,KACC/O,EAAAC,EAAAC,cAACyO,EAAA,EAAD,CAAOhO,KAAK,YAAY8N,UAAWH,KACnCtO,EAAAC,EAAAC,cAACyO,EAAA,EAAD,CAAOhO,KAAK,SAAS8N,UAAWb,KAC7B5N,EAAAC,EAAAC,cAACyO,EAAA,EAAD,CAAOhO,KAAK,UAAU8N,UAAWF,KACpCvO,EAAAC,EAAAC,cAAC8O,GAAD,CACKrO,KAAK,cACL8N,UAAWlC,KAEhBvM,EAAAC,EAAAC,cAACyO,EAAA,EAAD,CAAOhO,KAAK,aAAa8N,UAAW5E,KACpC7J,EAAAC,EAAAC,cAACyO,EAAA,EAAD,CAAOhO,KAAK,WAAW8N,UAAW3E,KAClC9J,EAAAC,EAAAC,cAACyO,EAAA,EAAD,CAAOhO,KAAK,UAAU+N,OAAQ,SAAA5O,GAAK,OAAIE,EAAAC,EAAAC,cAAC+O,GAADzP,OAAA4K,OAAA,GAAYtK,EAAZ,CAAmB2E,KAAMvD,EAAKyF,MAAMlC,WAC3EzE,EAAAC,EAAAC,cAACyO,EAAA,EAAD,CAAOhO,KAAK,aAAa8N,UAAW1E,KACpC/J,EAAAC,EAAAC,cAACmO,EAAA,EAAD,CAAUH,KAAK,IAAIgB,OAAK,EAAC9K,GAAG,YAC5BpE,EAAAC,EAAAC,cAACmO,EAAA,EAAD,CAAUjK,GAAG,eACbpE,EAAAC,EAAAC,cAACmO,EAAA,EAAD,CAAUH,KAAK,aAAa9J,GAAG,yBA7BtB5D,cCTE2O,QACW,cAA7BlB,OAAOD,SAASoB,UAEe,UAA7BnB,OAAOD,SAASoB,UAEhBnB,OAAOD,SAASoB,SAASjC,MACvB,uECLN5P,QAAQF,IAAIM,2KAEZ0R,IAASX,OACR1O,EAAAC,EAAAC,cAACoP,EAAA,EAAD,KACCtP,EAAAC,EAAAC,cAACqP,GAAD,OAEDC,SAASC,eAAe,SDwGnB,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAMC,KAAK,SAAAC,GACjCA,EAAaC","file":"static/js/main.370aee2d.chunk.js","sourcesContent":["\r\n\r\nfunction init () {\r\n\t// Sentry.init({\r\n\t//  \tdsn: \"https://8f85c2ffaaf046f48e607ffc3b07e1e9@sentry.io/1308953\"\r\n\t// });\r\n}\r\n\r\nfunction log (error) {\r\n\tconsole.log(error)\r\n\t// Sentry.captureException(error);\r\n}\r\n\r\nexport default {\r\n\tinit,\r\n\tlog\r\n}","import axios from 'axios';\r\nimport { toast } from 'react-toastify';\r\nimport logger from './logService';\r\n\r\naxios.defaults.baseURL = process.env.REACT_APP_API_URL;\r\n\r\naxios.interceptors.response.use(null, error => {\r\n  \r\n  const expectedError = error.response && error.response.status >= 400 && error.response.status < 500 \r\n\r\n  if (!expectedError) {\r\n    logger.log(error);\r\n    toast.error(\"An unexpected error iccured\");\r\n  }\r\n  \r\n  return Promise.reject(error);\r\n});\r\n\r\nfunction setJwt (jwt) {\r\n  axios.defaults.headers.common['x-auth-token'] =  jwt;\r\n}\r\n\r\nexport default {\r\n\tget: axios.get,\r\n\tpost: axios.post,\r\n\tput: axios.put,\r\n\tdelete: axios.delete,\r\n  setJwt\r\n};","import http from './httpService.js';\r\nimport { apiUrl } from '../config.json';\r\n\r\nconst apiEndpoint = '/movies';\r\n\r\nfunction movieUrl (id) {\r\n\treturn `${apiEndpoint}/${id}`;\r\n}\r\n\r\nexport function getMovies() {\r\n  return http.get(apiEndpoint);\r\n}\r\n\r\nexport function deleteMovie(movieId) {\r\n\treturn http.delete(movieUrl(movieId));\r\n}\r\n\r\nexport function getMovie(movieId) {\r\n\treturn http.get(movieUrl(movieId));\r\n}\r\n\r\nexport function saveMovie(movie) {\r\n\tif (movie._id) {\r\n\t\tconst body = {...movie};\r\n\t\tdelete body._id;\r\n\t\treturn http.put(movieUrl(movie._id), body);\r\n\t}\r\n\r\n\treturn http.post(apiEndpoint, movie);\r\n}","import http from './httpService.js'\r\nimport { apiUrl } from '../config.json';\r\n\r\nexport function getGenres() {\r\n\treturn http.get('/genres')\r\n}","import React, { Component } from 'react';\r\n\r\nclass Like extends Component {\r\n\t\r\n\trender () {\r\n\t\tconst { onLike, movie } = this.props;\r\n\t\treturn <span className=\"clickable\" onClick={() => onLike(movie)}><i className={this.getIcon()}></i></span>\r\n\t\t\r\n\t}\r\n\r\n\tgetIcon () {\r\n\t\tlet classes = 'fa fa-heart';\r\n\t\tclasses += this.props.liked ? '' : '-o';\r\n\t\treturn classes;\r\n\t}\r\n}\r\nexport default Like  ","import React, { Component } from 'react';\r\n\r\n\r\n// columns: array\r\n// sortColumn: object\r\n// onSort: function\r\n\r\nclass TableHeader extends Component {\r\n\traiseSort = path => {\r\n\t\tconst sortColumn = {...this.props.sortColumn}\r\n\t\tif (sortColumn.path === path) {\r\n\t\t\tsortColumn.order = (sortColumn.order === 'asc') ? 'desc' : 'asc';\r\n\t\t} else {\r\n\t\t\tsortColumn.path = path;\r\n\t\t\tsortColumn.order = 'asc';\r\n\t\t}\r\n\t\tthis.props.onSort(sortColumn);\r\n\t};\r\n\r\n\trenderSortIcon = column => {\r\n\t\tconst { sortColumn } = this.props;\r\n\t\tif (column.path !== sortColumn.path) return null;\r\n\t\tif (sortColumn.order === 'asc') return <i className=\"fa fa-sort-asc\"></i>;\r\n\r\n\t\treturn <i className=\"fa fa-sort-desc\"></i>;\r\n\t};\r\n\r\n\trender () {\r\n\t\treturn (\r\n\t\t\t<thead>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t{ this.props.columns.map(column => (\r\n\t\t\t\t\t\t<th\r\n\t\t\t\t\t\t\tclassName=\"clickable\" \r\n\t\t\t\t\t\t\tkey={column.path || column.key} \r\n\t\t\t\t\t\t\tonClick={() => this.raiseSort(column.path)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{column.label} {this.renderSortIcon(column)}\r\n\t\t\t\t\t\t</th>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</tr>\r\n\t\t\t</thead>\r\n\t\t);\r\n\r\n\t}\r\n}\r\n\r\nexport default TableHeader;","import React, { Component } from 'react';\r\nimport _ from 'lodash';\r\n\r\nclass TableBody extends Component {\r\n\trenderCell = (item, column) => {\r\n\t\tif (column.content) return column.content(item);\r\n\t\t\r\n\t\treturn _.get(item, column.path);\r\n\t};\r\n\r\n\tcreateKey = (item, column) => {\r\n\t\treturn item._id + (column.path || column.key);\r\n\t};\r\n\r\n\trender () {\r\n\t\tconst { data, columns } = this.props;\r\n\t\treturn ( \r\n\t\t\t<tbody>\r\n\t\t\t{\r\n\t\t\t\tdata.map(item => (\r\n\t\t\t\t\t<tr key={item._id}>\r\n\t\t\t\t\t\t{columns.map(column => <td key={this.createKey(item, column)}>{this.renderCell(item, column)}</td>)}\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t))\r\n\t\t\t}\r\n\t\t\t</tbody>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default TableBody;","import React from 'react';\r\n\r\nimport TableHeader from './tableHeader';\r\nimport TableBody from './tableBody';\r\n\r\nconst Table = ({ columns, sortColumn, onSort, data }) => {\r\n\treturn (\r\n\t\t<table className=\"table\">\r\n\t\t\t<TableHeader \r\n\t\t\t\tcolumns={columns} \r\n\t\t\t\tsortColumn={sortColumn} \r\n\t\t\t\tonSort={onSort}\r\n\t\t\t/>\r\n\t\t\t<TableBody data={data} columns={columns} />\r\n\t\t</table>\r\n\t);\t\r\n}\r\n\r\nexport default Table;","import jwtDecode from 'jwt-decode';\r\n\r\nimport http from './httpService.js';\r\nimport { apiUrl } from '../config.json';\r\n\r\nconst apiEndpoint = '/auth';\r\nconst tokenKey = 'token'\r\n\r\nhttp.setJwt(getJwt());  \r\n\r\nexport async function login (email, password) {\r\n\tconst { data: jwt } = await http.post(apiEndpoint, {email, password});\r\n\tlocalStorage.setItem(tokenKey, jwt);\r\n}\r\n\r\nexport function loginWithJwt (jwt) {\r\n\tlocalStorage.setItem(tokenKey, jwt);\r\n}\r\n\r\nexport function logout () {\r\n\tlocalStorage.removeItem(tokenKey);\r\n}\r\n\r\nexport function getCurrentUser () {\r\n\ttry {\r\n      const jwt = localStorage.getItem(tokenKey);\r\n      return jwtDecode(jwt);\r\n    }\r\n  catch (ex) {\r\n  \treturn null;\r\n  }\r\n}\r\n\r\nexport function getJwt () {\r\n\treturn localStorage.getItem(tokenKey)\r\n}\r\n\r\nexport default {\r\n\tlogin,\r\n\tloginWithJwt, \r\n\tlogout, \r\n\tgetCurrentUser,\r\n\tgetJwt\r\n}","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport Like from './common/like';\r\nimport Table from './common/table';\r\nimport auth from '../services/authService';\r\n\r\n\r\nclass MoviesTable extends Component {\r\n\tcolumns = [\r\n\t\t{path:  'title', label: 'Title', content: movie => <Link to={`movies/${movie._id}`}>{movie.title}</Link>},\r\n\t\t{path: 'genre.name', label: 'Genre'},\r\n\t\t{path: 'numberInStock', label: 'Stock'},\r\n\t\t{path: 'dailyRentalRate', label: 'Rate'},\r\n\t\t{key: 'like', content: movie => <Like movie={movie} onLike={this.props.onLike} liked={movie.liked} />}\r\n\t];\r\n\r\n\tdeleteColumn = {\r\n\t\tkey: 'delete',\r\n\t\tcontent: movie => (\r\n\t\t\t<button \r\n\t\t\t\tonClick={() => this.props.onDelete(movie)} \r\n\t\t\t\tclassName=\"btn btn-danger\"\r\n\t\t\t>\r\n\t\t\t\tDelete\r\n\t\t\t</button> \r\n\t\t)\r\n\t}\r\n\r\n\tconstructor () {\r\n\t\tsuper();\r\n\t\tconst user = auth.getCurrentUser();\r\n\t\tif (user && user.isAdmin) {\r\n\t\t\tthis.columns.push(this.deleteColumn)\t\r\n\t\t}\r\n\t}\r\n\trender () {\r\n\t\tconst { movies, sortColumn, onSort} = this.props;\r\n\t\treturn (\r\n\t\t\t<Table\r\n\t\t\t\tdata={movies}\r\n\t\t\t\tonSort={onSort}\r\n\t\t\t\tsortColumn={sortColumn}\r\n\t\t\t\tcolumns={this.columns}\r\n\t\t\t />\r\n\t\t);\r\n\t}\r\n};\r\n\r\nexport default\tMoviesTable;","import React from 'react';\r\nimport propTypes from 'prop-types';\r\nimport _ from 'lodash';\r\n\r\nconst Pagination = ({ itemsCount, pageSize, onPageChange, currentPage })  => {\r\n\tconst pagesCount = Math.ceil(itemsCount / pageSize);\r\n\tif (pagesCount === 1) return null;\r\n\tconst pages = _.range(1, pagesCount + 1);\r\n\r\n\treturn (\r\n\t\t<nav>\r\n\t\t\t<ul className=\"pagination\">\r\n\t\t\t\t{ pages.map((page) => (\r\n\t\t\t\t\t\t<li className={page === currentPage ? 'page-item active' : 'page-item'} key={page}>\r\n\t\t\t\t\t\t\t<a className=\"page-link\" href=\"#\" onClick={() => onPageChange(page)}>{page}</a>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t))\r\n\t\t\t\t}\r\n\t\t\t</ul>\r\n\t\t</nav>\r\n\t );\r\n}\r\n\r\nPagination.propTypes = {\r\n\titemsCount: propTypes.number.isRequired, \r\n\tpageSize: propTypes.number.isRequired, \r\n\tonPageChange: propTypes.func.isRequired, \r\n\tcurrentPage: propTypes.number.isRequired\r\n}\r\n\r\nexport default Pagination  ","import React from 'react';\r\n\r\nconst ListGroup = ({ items, onItemSelect, textProperty, valueProperty, selectedItem }) => {\r\n\treturn (\r\n\t\t<ul className=\"list-group\">\r\n\t\t\t{items.map(item => (\r\n\t\t\t\t<li \r\n\t\t\t\t\tonClick={() => onItemSelect(item)} \r\n\t\t\t\t\tclassName={item === selectedItem ? \"clickable list-group-item active\" : \"clickable list-group-item\"} \r\n\t\t\t\t\tkey={item[valueProperty]}>{item[textProperty]}\r\n\t\t\t\t</li>))}\r\n\t\t</ul>\r\n\t);\r\n}\r\n\r\nListGroup.defaultProps = {\r\n\ttextProperty:  'name',\r\n\tvalueProperty: '_id'\r\n};\r\n\r\nexport default ListGroup;","import React from 'react';\r\n\r\nconst SearchBox = ({ value, onChange }) => {\r\n\treturn (\r\n\t\t<input\r\n\t\t\ttype=\"text\"\r\n\t\t\tname=\"query\"\r\n\t\t\tclassName=\"form-control my-3\"\r\n\t\t\tplaceholder=\"Search...\"\r\n\t\t\tvalue={value}\r\n\t\t\tonChange={e => onChange(e.currentTarget.value)}\r\n\t\t/> \r\n\t);\t\r\n}\r\n\r\nexport default SearchBox;","import React, { Component } from 'react';\r\nimport _ from 'lodash';\r\nimport http from '../services/httpService';\r\nimport { toast } from 'react-toastify';\r\nimport { getMovies, deleteMovie } from '../services/movieService.js';\r\nimport { paginate } from '../utils/paginate';\r\nimport { getGenres } from '../services/genreService';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport MoviesTable from './moviesTable';\r\nimport Pagination from './common/pagination';\r\nimport ListGroup from './common/listGroup'\r\nimport SearchBox from './searchBox';\r\n\r\nclass Movies extends Component {\r\n\tstate = {\r\n\t\tmovies: [],\r\n\t\tgenres: [], \r\n\t\tpageSize: 4,\r\n\t\tsearchQuery: '',\r\n\t\tselectedGenre: null,\r\n\t\tcurrentPage: 1,\r\n\t\tsortColumn: { path: 'title', order: 'asc' }\r\n\t};\r\n\r\n\tasync componentDidMount () {\r\n\t\tconst { data } = await getGenres()\r\n\t\tconst genres = [{_id: '', name: 'All Genres'}, ...data]\r\n\t\tconst { data: movies } = await getMovies();\r\n\t\tthis.setState({movies, genres})\r\n\t};\r\n\r\n\tgetPageData = () => {\r\n\t\tconst { pageSize, currentPage, selectedGenre, searchQuery, sortColumn, movies: allMovies } = this.state;\r\n\r\n\t\tlet filtered = allMovies;\r\n\t\tif (searchQuery) {\r\n\t\t\tfiltered = allMovies.filter( m => m.title.toLowerCase().startsWith(searchQuery.toLowerCase()))\r\n\t\t} else if (selectedGenre && selectedGenre._id) {\r\n\t\t\tfiltered = allMovies.filter(m => m.genre._id === selectedGenre._id); \r\n\t\t}\r\n\r\n\t\tconst sorted = _.orderBy(filtered, [sortColumn.path], [sortColumn.order])\r\n\t\tconst movies = paginate(sorted, currentPage, pageSize);\r\n\r\n\t\treturn { totalCount: filtered.length, data: movies }\r\n\t}\r\n\r\n\thandleDelete = async movie => {\r\n\t\tconst originalMovies = this.state.movies;\r\n\t\tconst movies = originalMovies.filter(item => item._id !== movie._id)\r\n\t\tthis.setState({movies});\r\n\r\n\t\ttry {\r\n\t\t\tawait deleteMovie(movie._id);\r\n\t\t}\r\n\t\tcatch (ex) {\r\n\t\t\tif (ex.response && ex.response.status === 404) {\r\n\t\t\t\ttoast.error('this movie has aledy been deleted');\r\n\t\t\t}\r\n\t\t\tthis.setState({movies: originalMovies});\r\n\t\t}\r\n\t};\r\n\r\n\thandleLike = (movie) => {\r\n\t\tconst movies = [...this.state.movies];\r\n\t\tconst index = movies.indexOf(movie);\r\n\t\tmovies[index] = {...movie};\r\n\t\tmovies[index].liked = !movies[index].liked;\r\n\t\tthis.setState({ movies });\r\n\t};\r\n\r\n\thandlePageChange = page => {\r\n\t\tthis.setState({ currentPage : page })\r\n\t};\r\n\r\n\thandleGenereSelect = genre => {\r\n\t\tthis.setState({ selectedGenre: genre, currentPage: 1, searchQuery: '' });\r\n\t};\r\n\r\n\thandleSort = sortColumn => {\r\n\t\tthis.setState({ sortColumn });\r\n\t};\r\n\r\n\thandleChange = query => {\r\n\t\tthis.setState({ searchQuery: query, selectedGenre: null, currentPage: 1 });\r\n\t};\r\n\r\n\trender () {\r\n\t\tconst { length: count } = this.state.movies;\r\n\t\tconst { pageSize, currentPage, sortColumn } = this.state;\r\n\t\tconst { user } = this.props;\r\n\r\n\t\tconst { totalCount, data: movies } = this.getPageData();\r\n\t\t\t \r\n\t\treturn (\r\n\t\t<div className=\"row\">\r\n\t\t\t<div className=\"col-3\">\r\n\t\t\t\t<ListGroup \r\n\t\t\t\t\titems={this.state.genres}\r\n\t\t\t\t\tselectedItem={this.state.selectedGenre}  \r\n\t\t\t\t\tonItemSelect={this.handleGenereSelect}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"col\">\r\n\t\t\t\t{user && (\r\n\t\t\t\t\t<Link \r\n\t\t\t\t\t\tto=\"/movies/new\" \r\n\t\t\t\t\t\tclassName=\"btn btn-primary\" \r\n\t\t\t\t\t\tstyle={{ marginBottom: 20 }} \r\n\t\t\t\t\t> \r\n\t\t\t\t\t\tNew Movie  \r\n\t\t\t\t\t</Link>\r\n\t\t\t\t)}\r\n\t\t\t\t<p>Showin {totalCount} movies in the database</p>\r\n\t\t\t\t<SearchBox value={this.state.searchQuery} onChange={this.handleChange} />\t\t\t\t\t \r\n\t\t\t\t<MoviesTable\r\n\t\t\t\t\tmovies={movies}\r\n\t\t\t\t\tsortColumn={sortColumn}\r\n\t\t\t\t\tonLike={this.handleLike}\r\n\t\t\t\t\tonDelete={this.handleDelete}\r\n\t\t\t\t\tonSort={this.handleSort}\r\n\t\t\t\t/>\r\n\t\t\t\t<Pagination \r\n\t\t\t\t\titemsCount={totalCount} \r\n\t\t\t\t\tpageSize={pageSize}\r\n\t\t\t\t\tcurrentPage={currentPage}  \r\n\t\t\t\t\tonPageChange={this.handlePageChange} \r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t</div>);\r\n\t}\r\n}\r\n\r\nexport default Movies","import _ from 'lodash';\r\n\r\nexport function paginate (items, pageNumber, pageSize) {\r\n\tconst startIndex = (pageNumber - 1) * pageSize;\r\n\treturn _(items)\r\n\t\t.slice(startIndex)\r\n\t\t.take(pageSize)\r\n\t\t.value()\r\n};","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nconst NavBar = ({ user }) => {\r\n\r\n return (\r\n \t<nav className=\"navbar navbar-expand-lg navbar-light bg-light\">\r\n \t<div className=\"navbar-brand\">Vidly</div>\r\n \t\t<button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n\t    <span className=\"navbar-toggler-icon\"></span>\r\n  \t</button>\r\n \t\t<div className=\" collapse navbar-collapse\">\r\n \t\t\t<ul className=\"navbar-nav\">\r\n \t\t\t\t<li className=\"nav-item\">\r\n \t\t\t\t\t<NavLink to=\"/movies\" className=\"nav-link\">Movies</NavLink>\r\n \t\t\t\t</li>\r\n \t\t\t\t<li className=\"nav-item\">\r\n \t\t\t\t\t<div>\r\n \t\t\t\t\t\t <NavLink to=\"/customers\" className=\"nav-link\">Customers</NavLink>\r\n \t\t\t\t\t</div>\r\n \t\t\t\t</li>\r\n \t\t\t\t<li className=\"nav-item\">\r\n \t\t\t\t\t<NavLink to=\"/rentals\" className=\"nav-link\">Rentals</NavLink>\r\n \t\t\t\t</li>\r\n \t\t\t\t\r\n \t\t\t\t{!user && (\r\n \t\t\t\t <React.Fragment>\r\n \t\t\t\t \t<li className=\"nav-item\">\r\n \t\t\t\t \t\t<NavLink to=\"/login\" className=\"nav-link\">Login</NavLink>\r\n \t\t\t\t \t</li>\r\n \t\t\t\t \t<li className=\"nav-item\">\r\n \t\t\t\t \t\t<NavLink to=\"/register\" className=\"nav-link\">Register</NavLink>\r\n \t\t\t\t \t</li>\r\n \t\t\t\t </ React.Fragment>\r\n \t\t\t\t)}\r\n \t\t\t\t{user && (\r\n \t\t\t\t <React.Fragment>\r\n \t\t\t\t \t<li className=\"nav-item\">\r\n \t\t\t\t \t\t<NavLink to=\"/profile\" className=\"nav-link\">{user.name}</NavLink>\r\n \t\t\t\t \t</li>\r\n \t\t\t\t \t<li className=\"nav-item\">\r\n \t\t\t\t \t\t<NavLink to=\"/logout\" className=\"nav-link\">Logout</NavLink>\r\n \t\t\t\t \t</li>\r\n \t\t\t\t </ React.Fragment>\r\n \t\t\t\t)}\r\n \t\t\t</ul>\r\n \t\t</div>\r\n \t</nav>\t\r\n );\r\n}\r\n\r\nexport default NavBar;","import React from 'react';\r\n\r\nconst Customers = () => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<h1>Customers</h1>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Customers;","import React from 'react';\r\n\r\nconst Rentals = () => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<h1>Rentals</h1>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Rentals;","import React from \"react\";\r\n\r\nconst NotFound = () => {\r\n  return <h1>Not Found</h1>;\r\n};\r\n\r\nexport default NotFound;\r\n","import React from 'react';\r\n\r\nconst Input = ({ name, label, error, ...rest }) => {\r\n\treturn (\r\n\t\t<div className=\"form-group\">\r\n\t\t\t<label htmlFor={name}>{label}</label>\r\n\t\t\t<input {...rest} name={name} className=\"form-control\" id={name} />\r\n\t\t\t{ error && <div className=\"alert alert-danger\">{error}</div> }\r\n\t\t</div>\r\n\t);\r\n};\t\r\n\r\nexport default Input;","import React from 'react';\r\n\r\nconst Select = ({ name, label, error, options, ...rest }) => {\r\n\treturn (\r\n\t\t<div className=\"form-group\">\r\n\t\t\t<label htmlFor={name}>{label}</label>\r\n\t\t\t<select {...rest} name={name} id={name} className=\"form-control\">\r\n\t\t\t<option value=\"\" />\r\n\t\t\t\t{options.map(option => <option value={option._id} key={option._id}>{option.name}</option>)}\r\n\t\t\t</select>\r\n\t\t\t{ error && <div className=\"alert alert-danger\">{error}</div> }\r\n\t\t</div>\r\n\t);\r\n};\t\r\n\r\nexport default Select;","import React, { Component } from 'react';\r\nimport Joi from 'joi-browser';\r\n\r\nimport Input from './input';\r\nimport Select from './select';\r\n\r\n\r\nclass Form extends Component {\r\n\tstate = {\r\n\t\tdata:  {},\r\n\t\terrors: {}\r\n\t};\r\n\r\n\tvalidate = () => {\r\n\t\tconst options = {abortEarly: false}\r\n\t\tconst { error } = Joi.validate(this.state.data, this.schema, options)\r\n\t\tif (!error) return null;\r\n\r\n\t\tconst errors = {};\r\n\t\tfor (let item of error.details) {\r\n\t\t\terrors[item.path[0]] = item.message;\r\n\t\t}\r\n\r\n\t\treturn errors\r\n\t};\r\n\r\n\tvalidateProperty = ({ name, value }) => {\r\n\t\tconst obj = { [name]: value };\r\n\t\tconst schema = {}\r\n\t\tschema[name] = this.schema[name];\r\n\t\tconst {error} = Joi.validate(obj, schema);\r\n\r\n\t\treturn error ? error.details[0].message : null;\r\n\t};\r\n\r\n\thandleSubmit = e => {\r\n\t\te.preventDefault();\r\n\r\n\t\t// validate\r\n\t\tconst errors = this.validate();\r\n\t\tthis.setState({ errors: errors || {} });\r\n\r\n\t\tif (errors) return;\r\n\t\tthis.doSubmit();\r\n\t};\r\n\r\n\thandleChange = ({ currentTarget: input }) => {\r\n\t\tconst errors = {...this.state.errors};\r\n\t\tconst errorMessage = this.validateProperty(input);\r\n\t\tif (errorMessage) errors[input.name] = errorMessage;\r\n\t\telse delete errors[input.name];\r\n\r\n\t\tconst data = {...this.state.data};\r\n\t\tdata[input.name] = input.value;\r\n\t\tthis.setState({ data, errors });\r\n\t};\r\n\r\n\trenderButton (label) {\r\n\t\treturn (\r\n\t\t\t<button\r\n\t\t\t\tdisabled={this.validate()}\r\n\t\t\t\tclassName=\"btn btn-primary\">\r\n\t\t\t\t\t{label}\r\n\t\t\t</button>\r\n\t\t)\r\n\t};\r\n\r\n\trenderInput (name, label, type = 'text', placeholder = '') {\r\n\t\tconst { data, errors } = this.state;\r\n\t\treturn (\r\n\t\t\t<Input\r\n\t\t\t\ttype={type} \r\n\t\t\t\tname={name}\r\n\t\t\t\tlabel={label}\r\n\t\t\t\tvalue={data[name]}\r\n\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\terror={errors[name]}\r\n\t\t\t\tplaceholder={placeholder}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n\r\n\trenderSelect (name, label, options) {\r\n\t\tconst { data, errors } = this.state;\r\n\t\treturn (\r\n\t\t\t<Select\r\n\t\t\t\tname={name}\r\n\t\t\t\tlabel={label}\r\n\t\t\t\terror={errors[name]}\r\n\t\t\t\tvalue={data[name]}\r\n\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\toptions={options}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n};\r\n\r\nexport default Form;","import React from 'react';\r\nimport Joi from 'joi-browser';\r\n\r\nimport Form from './common/form';\r\nimport { saveMovie, getMovie } from '../services/movieService';\r\nimport { getGenres } from '../services/genreService';\r\n\r\nclass MovieForm extends Form {\r\n\tstate = {\r\n\t\tdata: { title: '', genreId: '', numberInStock: '', dailyRentalRate: '' },\r\n\t\tgenres: [],\r\n\t\terrors: {}\r\n\t};\r\n\r\n\tschema = {\r\n\t\t_id: Joi.string(),\r\n\t\ttitle: Joi.string().required().label('Title'),\r\n\t\tgenreId: Joi.string().required().label('Genre'),\r\n\t\tnumberInStock: Joi.number().min(1).max(100).required().label('Stock in Number'),\r\n\t\tdailyRentalRate: Joi.number().min(1).max(10).required().label('Daily in Rate')\r\n\t};\r\n\r\n\tasync componentDidMount () {\r\n\t\tawait this.populateGenres();\r\n\t\tawait this.populateMovie()\r\n\t\t\r\n\t};\r\n\r\n\tasync populateGenres () {\r\n\t\tconst { data: genres } = await getGenres();\r\n\t\tthis.setState({ genres });\r\n\t}\r\n\r\n\tasync populateMovie () {\r\n\t\ttry {\r\n\t\t\tconst movieId = this.props.match.params.id;\r\n\t\t\tif (movieId === 'new') return;\r\n\r\n\t\t\tconst { data: movie} = await getMovie(movieId);\r\n\t\t\tthis.setState({ data: this.mapToViewModel(movie) });\r\n\t\t}\r\n\t\tcatch (ex) {\r\n\t\t\tif (ex.response && ex.response.status === 404) {\r\n\t\t\t\tthis.props.history.replace(\"/not-found\");\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tmapToViewModel (movie) {\r\n\t\treturn {\r\n\t\t\t_id: movie._id,\r\n\t\t\ttitle: movie.title,\r\n\t\t\tgenreId: movie.genre._id,\r\n\t\t\tnumberInStock: movie.numberInStock,\r\n\t\t\tdailyRentalRate: movie.dailyRentalRate\r\n\t\t};\r\n\t}\r\n\r\n\tdoSubmit = async () => {\r\n\t\tawait saveMovie(this.state.data);\r\n\t\t\r\n\t\tthis.props.history.push('/movies')\r\n\t};\r\n\r\n\trender () {\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<h1>Movie form </h1>\r\n\t\t\t\t<form onSubmit={this.handleSubmit}>\r\n\t\t\t\t\t{this.renderInput('title', 'Title')}\r\n\t\t\t\t\t{this.renderSelect('genreId', 'Genre', this.state.genres)}\r\n\t\t\t\t\t{this.renderInput('numberInStock', 'Number in Stock', 'number')}\r\n\t\t\t\t\t{this.renderInput('dailyRentalRate', 'Rate', 'number')}\r\n\r\n\t\t\t\t\t{this.renderButton('Save')}\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default MovieForm;","import React from 'react';\r\nimport Joi from 'joi-browser';\r\nimport { Redirect } from 'react-router-dom';\r\n\r\nimport Form from './common/form';\r\nimport { login, getCurrentUser } from '../services/authService';\r\n\r\nclass LoginForm extends Form {\r\n\tstate = {\r\n\t\tdata: {username: '', password: ''},\r\n\t\terrors: {}\r\n\t}\r\n\r\n\tschema = {\r\n\t\tusername: Joi.string().required().label('Username'),\r\n\t\tpassword: Joi.string().required().label('Password')\r\n\t}\r\n\r\n\tusername = React.createRef();\r\n\r\n\tdoSubmit = async () => {\r\n\t\ttry {\r\n\t\t\tconst { data } = this.state;\r\n\t\t\tawait login(data.username, data.password);\r\n\r\n\t\t\tconst { state } = this.props.location;\r\n\t\t\t\r\n\t\t\twindow.location = state ? state.from.pathname : '/';\r\n\t\t}\r\n\t\tcatch (ex) {\r\n\t\t\tif (ex.response && ex.response.status === 400) {\r\n\t\t\t\tconst errors = {...this.state.erorrs};\r\n\t\t\t\terrors.username = ex.response.data;\r\n\t\t\t\tthis.setState({ errors });\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t};\r\n\r\n\trender () {\r\n\t\tif (getCurrentUser()) return <Redirect to=\"/\" />\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<h1>login</h1>\r\n\t\t\t\t<form onSubmit={this.handleSubmit}>\r\n\t\t\t\t\t{this.renderInput('username', 'Username')}\r\n\t\t\t\t\t{this.renderInput('password', 'Password', 'password')}\r\n\t\t\t\t\t{this.renderButton('Login')}\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n};\r\n\r\nexport default LoginForm;","import http from './httpService.js';\r\nimport { apiUrl } from '../config.json';\r\n\r\nconst apiEndpoint = '/users';\r\n\r\nexport function register (user) {\r\n\treturn http.post(apiEndpoint, {\r\n\t\temail: user.username,\r\n\t\tpassword: user.password,\r\n\t\tname: user.name\r\n\t});\r\n}","import React from 'react';\r\nimport Joi from 'joi-browser';\r\nimport Form from './common/form';\r\nimport * as userService from '../services/userService';\r\nimport { loginWithJwt } from '../services/authService';\r\n\r\n\r\nclass RegisterForm extends Form {\r\n\tstate = {\r\n\t\tdata: {username: '', password: '', name: ''},\r\n\t\terrors: {}\r\n\t}\r\n\r\n\tschema = {\r\n\t\tusername: Joi.string().email().required().label('Username'),\r\n\t\tpassword: Joi.string().required().min(5).label('Password'),\r\n\t\tname: Joi.string().required().label('Name')\r\n\t}\r\n\r\n\tdoSubmit = async () => {\r\n\t\ttry {\r\n\t\t\tconst response = await userService.register(this.state.data);\r\n\t\t\tloginWithJwt(response.headers['x-auth-token']);\r\n\t\t\twindow.location = '/';\r\n\t\t}\r\n\t\tcatch (ex) {\r\n\t\t\tif (ex.response && ex.response.status === 400) {\r\n\t\t\t\tconst errors = {...this.state.errors};\r\n\t\t\t\terrors.username = ex.response.data;\r\n\t\t\t\tthis.setState({ errors });\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\trender () {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<h1>Register</h1>\r\n\t\t\t\t<form onSubmit={this.handleSubmit}>\r\n\t\t\t\t\t{this.renderInput('username', 'Username', 'email')}\r\n\t\t\t\t\t{this.renderInput('password', 'Password', 'password')}\r\n\t\t\t\t\t{this.renderInput('name', 'Name')}\r\n\t\t\t\t\t{this.renderButton('Register')}\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\r\n\t\t);\r\n\t}\r\n};\r\n\r\nexport default RegisterForm; ","import React, { Component } from 'react';\r\nimport { logout } from '../services/authService';\r\n\r\nclass Logout extends Component {\r\n\tcomponentDidMount () {\r\n\t\tlogout();\r\n\t\twindow.location = '/';\r\n\t}\r\n\r\n\trender () {\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\nexport default Logout;","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\n\r\nimport auth from '../../services/authService';\r\n\r\nconst ProtectedRoute = ({ path, component: Component, render, ...rest }) => {\r\n\treturn (\r\n\t\t<Route \r\n      {...rest}\r\n      render={props => {\r\n      \tif (!auth.getCurrentUser()) {return <Redirect to={{\r\n      \t\tpathname: '/login', \r\n      \t\tstate: { from: props.location } \r\n      \t}} \r\n      />}\r\n      \treturn Component ? <Component {...props} /> : render(props)\r\n    \t} \r\n  \t} \r\n\t/>\r\n\t);\r\n}\r\n\r\nexport default ProtectedRoute;","import React, { Component } from 'react';\nimport { Route, Switch, Redirect } from 'react-router-dom';\nimport { ToastContainer } from 'react-toastify';\n\nimport Movies from './components/movies.jsx';\nimport NavBar from './components/common/navbar';\nimport Customers from './components/customers';\nimport Rentals from './components/rentals';\nimport NotFound from './components/common/notFound';\nimport MovieForm from './components/movieForm';\nimport LoginForm from './components/loginForm';\nimport RegisterForm from './components/registerForm';\nimport Logout from './components/logout';\nimport { getCurrentUser } from './services/authService';\nimport ProtectedRoute from './components/common/protectedRoute';\n\nimport 'react-toastify/dist/ReactToastify.css';\nimport './App.css';\n\nclass App extends Component {\n  state ={};\n\n  componentDidMount () {\n    const user = getCurrentUser();\n    this.setState({ user });\n  }\n\n  render() {\n   const { user } = this.state;\n    return (\n      <main className=\"container\">\n      <ToastContainer />\n      \t<NavBar user={user} />\n      \t<div className=\"content\">\n      \t\t<Switch>\n      \t\t\t<Route path=\"/register\" component={RegisterForm} />\n      \t\t\t<Route path=\"/login\" component={LoginForm} />\n            <Route path=\"/logout\" component={Logout} />\n      \t\t\t<ProtectedRoute \n              path=\"/movies/:id\"\n              component={MovieForm} \n            />\n      \t\t\t<Route path=\"/customers\" component={Customers} />\n      \t\t\t<Route path=\"/rentals\" component={Rentals} />\n      \t\t\t<Route path=\"/movies\" render={props => <Movies {...props} user={this.state.user} />} />\n      \t\t\t<Route path=\"/not-found\" component={NotFound} />\n      \t\t\t<Redirect from=\"/\" exact to=\"/movies\" />\n      \t\t\t<Redirect to=\"/not-found\" />\n      \t\t\t<Redirect from=\"movies/:id\" to=\"/not-found\" />\t\t\t\n      \t\t</Switch>\n      \t</div>\n      </main>\n    );\n  }\n}\n\nexport default App;\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n\n              // Execute callback\n              if (config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\n\n\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport 'font-awesome/css/font-awesome.css';\n\nconsole.log(process.env);\n\nReactDOM.render(\n\t<BrowserRouter>\n\t\t<App />\n\t</BrowserRouter>,\n\tdocument.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}